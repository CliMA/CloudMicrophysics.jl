<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Non-equilibrium cloud formation · CloudMicrophysics.jl</title><meta name="title" content="Non-equilibrium cloud formation · CloudMicrophysics.jl"/><meta property="og:title" content="Non-equilibrium cloud formation · CloudMicrophysics.jl"/><meta property="twitter:title" content="Non-equilibrium cloud formation · CloudMicrophysics.jl"/><meta name="description" content="Documentation for CloudMicrophysics.jl."/><meta property="og:description" content="Documentation for CloudMicrophysics.jl."/><meta property="twitter:description" content="Documentation for CloudMicrophysics.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="CloudMicrophysics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">CloudMicrophysics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Parameterizations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Microphysics0M/">0-moment precipitation microphysics</a></li><li><a class="tocitem" href="../Microphysics1M/">1-moment precipitation microphysics</a></li><li><a class="tocitem" href="../Microphysics2M/">2-moment precipitation microphysics</a></li><li><a class="tocitem" href="../P3Scheme/">P3 Scheme</a></li><li class="is-active"><a class="tocitem" href>Non-equilibrium cloud formation</a><ul class="internal"><li><a class="tocitem" href="#Simple-condensation/evaporation-and-deposition/sublimation"><span>Simple condensation/evaporation and deposition/sublimation</span></a></li><li><a class="tocitem" href="#Condensation/evaporation-and-deposition/sublimation-from-Morrison-and-Milbrandt-2015"><span>Condensation/evaporation and deposition/sublimation from Morrison and Milbrandt 2015</span></a></li></ul></li><li><a class="tocitem" href="../ThresholdsTransition/">Smooth transition at thresholds</a></li><li><a class="tocitem" href="../AerosolActivation/">Aerosol activation</a></li><li><a class="tocitem" href="../WaterActivity/">Water Activity</a></li><li><a class="tocitem" href="../IceNucleation/">Ice Nucleation</a></li><li><a class="tocitem" href="../AerosolNucleation/">Aerosol Nucleation</a></li><li><a class="tocitem" href="../PrecipitationSusceptibility/">Precipitation Susceptibility</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">How to guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../guides/literated/GettingStarted/">Getting started</a></li><li><a class="tocitem" href="../guides/literated/Parameters/">Handling parameters</a></li><li><a class="tocitem" href="../guides/literated/SimpleModel/">Building a model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../IceNucleationParcel0D/">Adiabatic parcel model</a></li><li><a class="tocitem" href="../IceNucleationBox0D/">Box Model</a></li></ul></li><li><a class="tocitem" href="../API/">API</a></li><li><a class="tocitem" href="../DevelopersGuide/">Developer&#39;s Guide</a></li><li><a class="tocitem" href="../Glossary/">Glossary</a></li><li><a class="tocitem" href="../References/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Parameterizations</a></li><li class="is-active"><a href>Non-equilibrium cloud formation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Non-equilibrium cloud formation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/CloudMicrophysics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/CloudMicrophysics.jl/blob/main/docs/src/MicrophysicsNonEq.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Microphysics-NonEquilibrium"><a class="docs-heading-anchor" href="#Microphysics-NonEquilibrium">Microphysics NonEquilibrium</a><a id="Microphysics-NonEquilibrium-1"></a><a class="docs-heading-anchor-permalink" href="#Microphysics-NonEquilibrium" title="Permalink"></a></h1><p>The <code>MicrophysicsNonEq.jl</code> module describes a bulk parameterization of   diffusion of water vapor on cloud droplets and cloud ice crystals   modeled as a relaxation to equilibrium.</p><p>The cloud microphysics variables are expressed as specific humidities:</p><ul><li><code>q_tot</code> - total water specific humidity,</li><li><code>q_vap</code> - water vapor specific humidity,</li><li><code>q_liq</code> - cloud water specific humidity,</li><li><code>q_ice</code> - cloud ice specific humidity,</li></ul><p>Parameters used in the parameterization are defined in   <a href="https://github.com/CliMA/ClimaParams.jl">ClimaParams.jl</a> package. They consist of:</p><table><tr><th style="text-align: right">symbol</th><th style="text-align: right">definition</th><th style="text-align: right">units</th><th style="text-align: right">default value</th></tr><tr><td style="text-align: right"><span>$\tau_{l}$</span></td><td style="text-align: right">cloud water condensation/evaporation timescale</td><td style="text-align: right"><span>$s$</span></td><td style="text-align: right"><span>$10$</span></td></tr><tr><td style="text-align: right"><span>$\tau_{i}$</span></td><td style="text-align: right">cloud ice deposition/sublimation timescale</td><td style="text-align: right"><span>$s$</span></td><td style="text-align: right"><span>$10$</span></td></tr></table><h2 id="Simple-condensation/evaporation-and-deposition/sublimation"><a class="docs-heading-anchor" href="#Simple-condensation/evaporation-and-deposition/sublimation">Simple condensation/evaporation and deposition/sublimation</a><a id="Simple-condensation/evaporation-and-deposition/sublimation-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-condensation/evaporation-and-deposition/sublimation" title="Permalink"></a></h2><p>Condensation/evaporation of cloud liquid water and deposition/sublimation of cloud ice are parameterized   as a relaxation to equilibrium value at the current time step. The equilibrium value is obtained based on a prescribed phase partition function   that divides the available excess water vapor between liquid and ice   (based on temperature).</p><p class="math-container">\[\begin{equation}
  \left. \frac{d \, q_{liq}}{dt} \right|_{cond, evap} = \frac{q^{eq}_{liq} - q_{liq}}{\tau_{l}}; \;\;\;\;\;\;\;
  \left. \frac{d \, q_{ice}}{dt} \right|_{dep, sub}   = \frac{q^{eq}_{ice} - q_{ice}}{\tau_{i}}
\end{equation}\]</p><p>where:</p><ul><li><span>$q^{eq}_{liq}, q^{eq}_{ice}$</span> - liquid and water specific humidity in equilibrium at current temperature and assuming some phase partition function based on temperature</li><li><span>$q_{liq}, q_{ice}$</span> - current liquid water and ice specific humidity,</li><li><span>$\tau_{l}, \tau_{i}$</span> - relaxation timescales.</li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Both <span>$\tau_{l}$</span> and <span>$\tau_{i}$</span> are assumed to be constant. It would be great to make the relaxation time a function of available condensation nuclei, turbulence intensity, etc. See works by <a href="https://www.mtu.edu/physics/department/faculty/shaw/">prof Raymond Shaw</a> for hints. In particular, [<a href="../References/#Desai2019">33</a>].</p></div></div><h2 id="Condensation/evaporation-and-deposition/sublimation-from-Morrison-and-Milbrandt-2015"><a class="docs-heading-anchor" href="#Condensation/evaporation-and-deposition/sublimation-from-Morrison-and-Milbrandt-2015">Condensation/evaporation and deposition/sublimation from Morrison and Milbrandt 2015</a><a id="Condensation/evaporation-and-deposition/sublimation-from-Morrison-and-Milbrandt-2015-1"></a><a class="docs-heading-anchor-permalink" href="#Condensation/evaporation-and-deposition/sublimation-from-Morrison-and-Milbrandt-2015" title="Permalink"></a></h2><p>Condensation/evaporation and deposition/sublimation rates are based on   the difference between the water vapor specific humidity and saturation   vapor specific humidity over liquid and ice at the current temperature. The process is modeled as a relaxation with a constant timescale. This formulation is derived from [<a href="../References/#MorrisonGrabowski2008_supersat">34</a>]   and [<a href="../References/#MorrisonMilbrandt2015">24</a>], but without imposing exponential time integrators.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The [<a href="../References/#MorrisonGrabowski2008_supersat">34</a>] and [<a href="../References/#MorrisonMilbrandt2015">24</a>] papers use mass mixing ratios, not specific humidities. Additionally, in their formulations they consider two different categories for liquid: cloud water and rain. For now we only consider cloud water and use a single relaxation timescale <span>$\tau_l$</span> (liquid) rather than separate <span>$\tau_c$</span> (cloud) and <span>$\tau_r$</span> (rain) values.</p></div></div><p class="math-container">\[\begin{equation}
   \left. \frac{d \, q_{liq}}{dt} \right|_{cond, evap} = \frac{q_{vap} - q_{sl}}{\tau_l \Gamma_l}; \;\;\;\;\;\;\;
   \left. \frac{d \, q_{ice}}{dt} \right|_{dep, sub}   = \frac{q_{vap} - q_{si}}{\tau_i \Gamma_i}
\end{equation}\]</p><p>where:</p><ul><li><span>$q_{vap}$</span> is the water vapor specific humidity</li><li><span>$q_{sl}$</span>, <span>$q_{si}$</span> is the saturation specific humidity over liquid and ice</li><li><span>$\tau_l$</span>, <span>$\tau_i$</span> is the liquid and ice relaxation timescale</li><li><span>$\Gamma_l$</span>, <span>$\Gamma_i$</span> is a psychometric correction due to latent heating/cooling:</li></ul><p class="math-container">\[\begin{equation}
    \Gamma_l = 1 + \frac{L_{v}}{c_p} \frac{dq_{sl}}{dT}; \;\;\;\;\;\;\;\;
    \Gamma_i = 1 + \frac{L_{s}}{c_p} \frac{dq_{si}}{dT}
\end{equation}\]</p><p class="math-container">\[\begin{equation}
    \frac{dq_{sl}}{dT} = q_{sl} \left(\frac{L_v}{R_v  T^2} - \frac{1}{T} \right); \;\;\;\;\;\;\;\;\;\;
    \frac{dq_{si}}{dT} = q_{si} \left(\frac{L_s}{R_v  T^2} - \frac{1}{T} \right)
\end{equation}\]</p><p>where:</p><ul><li><span>$T$</span> is the temperature,</li><li><span>$c_p$</span> is the specific heat of air at constant pressure,</li><li><span>$R_v$</span> is the gas constant of water vapor,</li><li><span>$L_v$</span> and <span>$L_s$</span> is the latent heat of vaporization and sublimation.</li></ul><pre><code class="nohighlight hljs">Note that these forms of condensation/sublimation and deposition/sublimation are equivalent to those described in the adiabatic parcel model with some rearrangements and assumptions. It is just necessary to use the definitions of ```\tau```, ```q_{sl}```, and the thermal diffusivity ```D_v```:

```math
\begin{equation}
  \tau = 4 \pi N_{tot} \bar{r}, \;\;\;\;\;\;\;\;
  q_{sl} = \frac{e_{sl}}{\rho R_v T}, \;\;\;\;\;\;\;\;
  D_v = \frac{K}{\rho c_p}
\end{equation}
```
and if we assume that the supersaturation S can be approximated by specific humidities (this is only exactly true for mass mixing ratios):
```math
\begin{equation}
    S_l = \frac{q_{vap}}{q_{sl}}
\end{equation}
```
then we can write:
```math
\begin{equation}
  q_{vap} - q_{sl} = q_{sl}(S_l - 1)
\end{equation}
```
and ```Gamma``` is equivalent to the ```G``` function used in our parcel and parameterizations.</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../P3Scheme/">« P3 Scheme</a><a class="docs-footer-nextpage" href="../ThresholdsTransition/">Smooth transition at thresholds »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Friday 23 August 2024 18:18">Friday 23 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
